@model SFA.DAS.AdminService.Web.ViewModels.Roatp.Applications.RoatpApplicationApprovalViewModel

@{
    ViewBag.Title = "Approve for RoATP";
    Layout = "_Layout";

    var isError = Model.IsError ? "govuk-form-group--error" : "";
    var isErrorDay = Model.IsErrorDay ? "govuk-input--error" : "";
    var isErrorMonth = Model.IsErrorMonth ? "govuk-input--error" : "";
    var isErrorYear = Model.IsErrorYear ? "govuk-input--error" : "";
}

<a asp-action="Application" asp-controller="RoatpApplication" class="govuk-back-link">Back</a>
<main class="govuk-main-wrapper " id="main-content" role="main">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            @if (Model.IsError)
            {
                <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="error-summary">
                    <h2 class="govuk-error-summary__title" id="error-summary-title">
                        There is a problem
                    </h2>
                    <div class="govuk-error-summary__body">
                        <ul class="govuk-list govuk-error-summary__list">
                            @foreach (var error in Model.ErrorMessages)
                            {
                                <li><a sfa-validation-for="ApplicationDeterminedDate" href="#@error.Field">@error.ErrorMessage</a></li>
                            }
                        </ul>
                    </div>
                </div>
            }

            <h1 class="govuk-heading-xl">Confirm Approval for RoATP</h1>
            <h2 class="govuk-heading-m">Organisation details</h2>

            <dl class="govuk-summary-list">

                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        UKPRN
                    </dt>
                    <dd class="govuk-summary-list__value">
                        @Model.UKPRN
                    </dd>
                </div>

                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Legal name
                    </dt>
                    <dd class="govuk-summary-list__value">
                        @Model.LegalName
                    </dd>
                </div>

                @if (!String.IsNullOrWhiteSpace(Model.TradingName))
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Trading name
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.TradingName
                        </dd>
                    </div>
                }

                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Provider route
                    </dt>
                    <dd class="govuk-summary-list__value">
                        @Model.ApplicationRoute
                    </dd>
                </div>

                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Organisation type
                    </dt>
                    <dd class="govuk-summary-list__value">
                        @Model.OrganisationTypeDescription
                    </dd>
                </div>

                @if (!String.IsNullOrWhiteSpace(Model.CompanyNumber))
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Company number
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.CompanyNumber
                        </dd>
                    </div>
                }

                @if (!String.IsNullOrWhiteSpace(Model.CharityNumber))
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Charity number
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.CharityNumber
                        </dd>
                    </div>
                }
            </dl>
        </div>
    </div>
          

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <form class="js-disable-on-submit" asp-controller="RoatpApplication" asp-action="ConfirmApproval" method="post">
                @Html.HiddenFor(x => x.ApplicationId)
                
                <div class="govuk-form-group @isError" sfa-validation-for="ApplicationDeterminedDate" sfa-validationerror-class="govuk-form-group--error">
                    <h1 class="govuk-heading-l">What is the application determined date for this organisation?</h1>
                    <p class="govuk-body" id="appdd-message-text">
                        This is the date of when feedback was given to the training provider.
                    </p>

                    <span class="govuk-hint" id="dob-hint">
                        For example, 24 04 2019
                    </span>

                    <span class="govuk-error-message" asp-validation-for="ApplicationDeterminedDate"></span>

                    <div class="govuk-date-input">
                        <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-date-input__label" for="DeterminedDateDay">Day</label>
                                <input value="@Model.DeterminedDateDay"
                                       class="govuk-input govuk-date-input__input govuk-input--width-2 @isErrorDay"
                                       id="DeterminedDateDay"
                                       name="DeterminedDateDay"
                                       type="number"
                                       pattern="[0-9]*" />
                            </div>
                        </div>
                        <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-date-input__label" for="DeterminedDateMonth">Month</label>
                                <input value="@Model.DeterminedDateMonth"
                                       class="govuk-input govuk-date-input__input govuk-input--width-2 @isErrorMonth"
                                       id="DeterminedDateMonth"
                                       name="DeterminedDateMonth"
                                       type="number"
                                       pattern="[0-9]*" />
                            </div>
                        </div>
                        <div class="govuk-date-input__item">
                            <div class="govuk-form-group">
                                <label class="govuk-label govuk-date-input__label" for="DeterminedDateYear">Year</label>
                                <input value="@Model.DeterminedDateYear"
                                       class="govuk-input govuk-date-input__input govuk-input--width-4 @isErrorYear"
                                       id="DeterminedDateYear"
                                       name="DeterminedDateYear"
                                       type="number"
                                       pattern="[0-9]*" />
                            </div>
                        </div>
                        <input type="hidden" name="ApplicationDeterminedDate" />
                    </div>
                </div>

                <button class="govuk-button" type="submit">Confirm and submit</button>
            </form>
        </div>
    </div>
</main>